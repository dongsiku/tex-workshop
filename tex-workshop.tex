\documentclass[11pt,a4paper]{jsarticle}
%
\usepackage{amsmath,amssymb}
\usepackage{bm}
\usepackage[dvipdfmx]{graphicx}
\usepackage{ascmac}
\usepackage{url}
\usepackage{color}
\usepackage{listings}
\usepackage{booktabs}

%
\usepackage{titlesec}     % For \titleformat
\usepackage{enumerate}  % For enumerate
% \usepackage{ulem}       % For underlining
%
\titleformat*{\section}{\large\bfseries}
\titleformat*{\subsection}{\normalsize\bfseries}
\setcounter{section}{-1}
%
\setlength{\textwidth}{\fullwidth}
\setlength{\textheight}{37\baselineskip}
\addtolength{\textheight}{\topskip}
\setlength{\voffset}{-0.5in}
\setlength{\headsep}{0.3in}
%
%\newcommand{\divergence}{\mathrm{div}\,}  %ダイバージェンス
%\newcommand{\grad}{\mathrm{grad}\,}  %グラディエント
%\newcommand{\rot}{\mathrm{rot}\,}  %ローテーション
%
\pagestyle{myheadings}
\markright{知能機械制御学研究室：\TeX 講習会の資料}
\begin{document}

\begin{center}
  {\Large\bfseries \TeX 講習会の資料} % title
\end{center}
\begin{flushright}
  {\large 諏訪 棟植} % author
\end{flushright}
%
%
\section{はじめに}

この文書は，\TeX の文法について，数式を中心にざっくりとまとめたものである．本文書も\TeX で書かれているため，必要に応じて\TeX ファイル``tex-workshop.tex''を参照せよ．TeXファイル内の\verb|%|は，コメントアウトするためのコマンドである．詳細は``tex ギリシャ文字''などでググること．

なお，以下の2点に注意せよ．(1) \textbf{先生方によっては，指定される書き方が違う場合}がある．適宜，先生の指示を仰ぐこと．(2) 本文書を使用することにより発生するいかなる不利益についても著者は責任をとらない．また，当分の間，改変版も含み，本文書の無断配布を禁ずる．

\section{数式の基本}

\subsection{文中の数式}

文中の数式$j=\sqrt{-1}$は，\verb|$j=\sqrt{-1}$|といったように，\verb|$|で囲んで書く．

\subsection{別行立ての数式}

別行立ての数式は，\verb|\begin{align},\end{align}|といったように，``align''で囲んで書く．また，2行以上の数式の場合は，\verb|&|を用いることで，文字を揃えられる．なお，数式中の空白文字は無視されるため，必要な時は\verb|~|や\verb|\quad|などを用いる．
\begin{align}
  x^3+y^3             & =(x+y)\left(x^2-xy+y^2\right) \label{factorization-1} \\
  x^3-y^3             & =(x-y)\left(x^2+xy+y^2\right) \label{factorization-2} \\
  \frac{x^3-y^3}{x-y} & =x^2+xy+y^2,~(x\neq y) \label{factorization-3}
\end{align}

\subsection{式番号}

ここで，\eqref{factorization-1}などと数式を指定する場合は，式に\verb|\label{factorization-1}|などのラベル付けたうえで，\verb|\eqref{factorization-1}|のように``eqref''を使う．数式の番号が一部のみ必要なときは，\eqref{factorization-4}のように\verb|\nonumber|を用いる．
\begin{align}\label{factorization-4}
  4x^2+8x+4 & =4\left(x^2+2x+1\right)\nonumber \\
            & =4(x+1)^2
\end{align}
まったく必要ないときは，\verb|\begin{align*},\end{align*}|で囲う．
\begin{align*}
  x^3-1=(x-1)\left(x^2+x+1\right)
\end{align*}

\subsection{その他}

これ以外にも，
\begin{equation*}
  \delta(x) =
  \begin{cases}
    1, & x \geq 0 \\
    0, & x < 0
  \end{cases}
\end{equation*}
のように場合分けの数式なども記述可能である．詳細は，``amsmathの数式環境まとめ''（\url{https://qiita.com/t_kemmochi/items/a4c390b4967b13f3afb7}）などを参照せよ．

\section{下付き文字と上付き文字}

下付き文字$z_1<1$は，\verb|$z_1<1$|のように\verb|_|を，上付き文字は$j^2=-1$のように\verb|^|を用いる．なお，下付き文字や上付き文字が2文字以上$a_{10},b^{20},c_{10}^{20}$のときは\verb|$a_{10},b^{20},c_{10}^{20}$|のように\verb|{ }|を用いる．

\section{和・積分（シグマとインテグラル）}

和（シグマ）は\verb|\sum|（\verb|\Sigma|でないことに注意せよ），積分（インテグラル）は\verb|\int|を用いる．下限と上限は，下付き文字と上付き文字のように\verb|_{}^{}|を用いる．
\begin{align*}
  \sum_{k=1}^{n}a_k & =a_1+a_2+a_3+\cdots+a_n \\
  \int_0^1 x dx     & = \frac{1}{2}
\end{align*}

\section{分数}

分数は基本的に\verb|\frac|を用いる．ただし，テキストスタイルとディスプレイスタイルは，それぞれ\verb|\tfrec,\dfrac|をもちいる．\verb|\frec{K}{Ts+1},\tfrec{K}{Ts+1},\dfrac{K}{Ts+1}|について，文中の数式ではそれぞれ$\frac{K}{Ts+1},\tfrac{K}{Ts+1},\dfrac{K}{Ts+1}$と，別行立ての数式では
\begin{align*}
  G(s) & =\frac{K}{Ts+1},  \\
  G(s) & =\tfrac{K}{Ts+1}, \\
  G(s) & =\dfrac{K}{Ts+1}
\end{align*}
と表記される．

\section{かっこ}

かっこは，\verb|(),\{\},[]|を用いる．特に，$\{\}$は，\TeX の文法（上付き文字の\verb|^{}|など）と重複しないため，\verb|\|をつけることに注意する．また，上付き文字や分数が含まれる式の場合，かっこを式の大きさに合わせるため，\verb|\left(\right),\left\{\right\},\left[\right]|を用いる．

なお，``physics''パッケージを用いれば，\verb|\left,\right|の代わりに\verb|\qty|を用いて式の大きさに合わせたかっこを記述できる（例：\verb|\qty(),\qty{},\qty[]|など）．詳細は，``数式をもっと楽に書ける TeX の physics パッケージまとめ''（\url{https://qiita.com/HelloRusk/items/ce9f49e9b3fc0344ae23}）などを参照せよ．

\section{ギリシャ文字}

ギリシャ文字は，$\alpha,\beta,\gamma$を\verb|\alpha,\beta,\gamma|などと記述できる．詳細は``tex ギリシア文字''などでググること．

\section{対数，三角関数など}

対数や三角関数は\verb|log,ln,sin,cos|でなく\verb|\log,\ln,\sin,\cos|などのように\verb|\|を先頭につけてローマン体（イタリック体でない文字）で記述する．それぞれの違いは以下のとおりである：$log,ln,sin,cos$ vs. $\log,\ln,\sin,\cos$

\section{極限，合同式}

極限は，\verb|\lim_{x\to\infty}f(x)|
\begin{align*}
  \lim_{x\to\infty}f(x)
\end{align*}
のように用いる．また，合同式は，\verb|\bmod 2 or \pmod 2|
\begin{align*}
  \bmod 2 \text{~or} \pmod 2
\end{align*}
のように用いる．

\section{アクセント}

アクセントは，\verb|\tilde{a},\hat{a}|のように用いる．これらは，$\tilde{a},\hat{a}$のように表示される．詳細は``tex hat''などでググること．

\section{フォントを変える}

文のフォントを\textit{italic}に変更するときは\verb|\textit{}|，数式中のフォントをローマンタイに変更するときは\verb|\mathrm{}|などで変更する．また，数式中の日本語には\verb|\text{}|を用いる．
\begin{align*}
  s_a = \mathrm{sign}(a),~\text{signは符号を示す}
\end{align*}
\underline{下線}の追加や\textcolor{red}{色}の変更も可能でる．詳細はググること．

\section{行列}

\verb|bmatrix|を用いて，
\begin{align*}
  \mathbb{A}=
  \begin{bmatrix}
    a & b \\
    c & d \\
  \end{bmatrix}
\end{align*}
などと記述する．

\section{図の挿入と作画}

図について，ベクター画像\footnote{拡大しても画像がギザギザにならないという強みを持つ}であるPDFを用いることを推奨するが，PNGやJPEGなどのビットマップ画像でも問題はない．本節では，作図ソフト，PDFファイルのトリミング，図の挿入の順で説明する．

まず，ベクター画像の作画ソフトについて，著者が知る限り，
\begin{enumerate} % \usepackage{enumerate} が必要
  \item Microsoft PowerPoint
  \item Adobe Illustrator
  \item Inkscape
  \item diagrams.net (\url{https://app.diagrams.net/})
\end{enumerate}
があり，本研究室では1を使っている学生が多く，著者もこれを推奨する．2はベクター画像の作画ソフトとしては有名なものであるが，高価であり，数式の入力が煩雑である．3は2と同様の機能を持つが無料であり，アドオンを使えば数式の入力も比較的簡単であるが，機能が多く初心者には使いづらい．4はフローチャートは作図しやすいものの，数式の入力が可能であるかは不明である．

次に，PDFのトリミングは，``pdfcrop''コマンドを用いる．``pdfcrop''コマンドは，TeXインストーラ３やTeX Liveを用いてインストールした場合，自動的にインストールされるはずである．例えば，``example.pdf''をトリミングする場合，PowerShellなどのターミナルから
\\\hrulefill\\
pdfcrop example.pdf\\
\hrulefill\\
などと記述する．コマンドのオプションもあるが，詳細はググること．

最後に，図を挿入するときは，\verb|\begin{figure}~\end{figure}|を用いて，図\ref{fig:example-image}のように挿入する．

\begin{figure}[hbtp]
  % []の中身について，t,b,p,hはそれぞれページ上端，ページ下端，単独ページ，できればその位置に図を出力するように指定する．
  % []内の順番は優先順位を示す．
  \centering % 中央揃えを行う
  \includegraphics[width=6cm]{example-crop.pdf} % 幅の長さとファイル名を指定する．
  \caption{図の例} % 図の下にキャプションをつける
  \label{fig:example-image} % ラベルを付け，文中から図\ref{}で図"番号"とする．
\end{figure}

\section{表}

表を挿入すときは，\verb|\begin{table}~\end{table}|を用いて，表\ref{tab:example-table}のように挿入する．

\begin{table}[htb]
  % []の中身について，t,b,p,hはそれぞれページ上端，ページ下端，単独ページ，できればその位置に表を出力するように指定する．
  % []内の順番は優先順位を示す．
  \centering % 中央揃えを行う．
  \caption{表の例} % 表の上にキャプションをつける
  \label{tab:example-table} % ラベルを付け，文中から表\ref{}で表"番号"とする．
  \begin{tabular}{lc|r} % l,c,r,|はそれぞれ左寄せ，中央，右寄せ,縦線を示す．
    左寄せ               & 題目中央         & 右寄せ               \\
    \hline % 横線
    要素左寄せ           & 要素中央         & 要素右寄せ           \\
    要素左寄せ要素左寄せ & 要素中央要素中央 & 要素右寄せ要素右寄せ \\
  \end{tabular}
\end{table}

\section{その他}

\subsection{sectionとか}

\verb|\chapter{},\section{},\subsection{}|はそれぞれ章，節，小節を示す．基本的には，\TeX ファイルのテンプレに従っていい感じに用いればよい．

\subsection{参考文献の挿入方法}

\verb|\begin{thebibliography}~\end{thebibliography}|と\verb|\cite{}|を用いる．詳細は，岡野先生の``私家版\LaTeX による工学文書の書き方''を参照するか，ググること

\subsection{usepackage}

パッケージを追加するコマンド\footnote{PythonやJavaの\verb|import|やC言語の\verb|#include|を想像されたい}．本文書の\TeX ファイルでもファイルの先頭を見ると，いくつかのパッケージが追加されていることが確認できるであろう．基本的には，``Undefined control sequence.''などといったエラーメッセージが表示されたときに，足りないパッケージがあるか確認し，追加すればよい．

\subsection{newcommand}

\verb|\newcommand|を用いることで，長いコマンドを短くできる\footnote{bashのaliasを想像されたい}．長いコマンドが何回も出てくる文章では，これを用いることを推奨する．

\end{document}
